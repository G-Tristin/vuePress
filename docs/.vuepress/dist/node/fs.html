<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>基本概念 | 梦想之路</title>
    <meta name="description" content="起风了，任要坚强的活下去">
    
    
    <link rel="preload" href="/assets/css/0.styles.48f274b5.css" as="style"><link rel="preload" href="/assets/js/app.81bc3037.js" as="script"><link rel="preload" href="/assets/js/32.cc80342c.js" as="script"><link rel="prefetch" href="/assets/js/10.8def6c83.js"><link rel="prefetch" href="/assets/js/11.3457136c.js"><link rel="prefetch" href="/assets/js/12.dc2b72f6.js"><link rel="prefetch" href="/assets/js/13.1f2bc63e.js"><link rel="prefetch" href="/assets/js/14.f8c6043d.js"><link rel="prefetch" href="/assets/js/15.4e4477b7.js"><link rel="prefetch" href="/assets/js/16.6a2bc7b9.js"><link rel="prefetch" href="/assets/js/17.747feb28.js"><link rel="prefetch" href="/assets/js/18.b7868336.js"><link rel="prefetch" href="/assets/js/19.22f0aece.js"><link rel="prefetch" href="/assets/js/2.eb0bafce.js"><link rel="prefetch" href="/assets/js/20.1f9b3b2f.js"><link rel="prefetch" href="/assets/js/21.e49e09ed.js"><link rel="prefetch" href="/assets/js/22.95076785.js"><link rel="prefetch" href="/assets/js/23.562b717f.js"><link rel="prefetch" href="/assets/js/24.3952779a.js"><link rel="prefetch" href="/assets/js/25.6d8ed32c.js"><link rel="prefetch" href="/assets/js/26.c05cc220.js"><link rel="prefetch" href="/assets/js/27.aa4612c9.js"><link rel="prefetch" href="/assets/js/28.ee39f9c7.js"><link rel="prefetch" href="/assets/js/29.da38b9b1.js"><link rel="prefetch" href="/assets/js/3.8c808b08.js"><link rel="prefetch" href="/assets/js/30.c25393bb.js"><link rel="prefetch" href="/assets/js/31.5de6002b.js"><link rel="prefetch" href="/assets/js/33.8527ac6b.js"><link rel="prefetch" href="/assets/js/34.53e2fb20.js"><link rel="prefetch" href="/assets/js/35.720df360.js"><link rel="prefetch" href="/assets/js/36.b3e6371a.js"><link rel="prefetch" href="/assets/js/37.7ba27e1a.js"><link rel="prefetch" href="/assets/js/38.da7b7ae2.js"><link rel="prefetch" href="/assets/js/39.4212980b.js"><link rel="prefetch" href="/assets/js/4.d51c0877.js"><link rel="prefetch" href="/assets/js/40.0897b6f1.js"><link rel="prefetch" href="/assets/js/41.4fb96b39.js"><link rel="prefetch" href="/assets/js/42.f6c4ec4b.js"><link rel="prefetch" href="/assets/js/43.851bd2e0.js"><link rel="prefetch" href="/assets/js/44.5c333ff9.js"><link rel="prefetch" href="/assets/js/45.80064017.js"><link rel="prefetch" href="/assets/js/46.f47eeceb.js"><link rel="prefetch" href="/assets/js/47.f5f401d6.js"><link rel="prefetch" href="/assets/js/48.6193479b.js"><link rel="prefetch" href="/assets/js/49.14a284fe.js"><link rel="prefetch" href="/assets/js/5.a22856c2.js"><link rel="prefetch" href="/assets/js/50.37548b37.js"><link rel="prefetch" href="/assets/js/51.0cbfdf9d.js"><link rel="prefetch" href="/assets/js/52.5a824704.js"><link rel="prefetch" href="/assets/js/53.9b1dab26.js"><link rel="prefetch" href="/assets/js/54.f931bf17.js"><link rel="prefetch" href="/assets/js/55.1518fcbb.js"><link rel="prefetch" href="/assets/js/56.fdb78d16.js"><link rel="prefetch" href="/assets/js/57.ca2be3fc.js"><link rel="prefetch" href="/assets/js/58.f0ed9c5e.js"><link rel="prefetch" href="/assets/js/59.190d46dc.js"><link rel="prefetch" href="/assets/js/6.3805a77d.js"><link rel="prefetch" href="/assets/js/7.4c7ada1d.js"><link rel="prefetch" href="/assets/js/8.534a355e.js"><link rel="prefetch" href="/assets/js/9.1d4c3048.js">
    <link rel="stylesheet" href="/assets/css/0.styles.48f274b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">梦想之路</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">web</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/home/javascript.html" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/home/css.html" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/home/babel.html" class="nav-link">babel</a></li><li class="dropdown-item"><!----> <a href="/home/context.html" class="nav-link">context</a></li><li class="dropdown-item"><!----> <a href="/home/gulp.html" class="nav-link">gulp</a></li><li class="dropdown-item"><!----> <a href="/home/html5.html" class="nav-link">html5</a></li><li class="dropdown-item"><!----> <a href="/home/polyfill.html" class="nav-link">polyfill</a></li><li class="dropdown-item"><!----> <a href="/home/webpack.html" class="nav-link">webpack</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/base.html" class="nav-link">base</a></li><li class="dropdown-item"><!----> <a href="/vue/component.html" class="nav-link">component</a></li><li class="dropdown-item"><!----> <a href="/vue/lib-flexible.html" class="nav-link">lib-flexible</a></li><li class="dropdown-item"><!----> <a href="/vue/vueload.html" class="nav-link">vueload</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/受控组件.html" class="nav-link">受控组件</a></li><li class="dropdown-item"><!----> <a href="/react/状态提升与slot.html" class="nav-link">状态提升与slot</a></li><li class="dropdown-item"><!----> <a href="/react/redux.html" class="nav-link">redux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/buffer.html" class="nav-link">buffer</a></li><li class="dropdown-item"><!----> <a href="/node/childProcess.html" class="nav-link">childProcess</a></li><li class="dropdown-item"><!----> <a href="/node/cluster.html" class="nav-link">cluster</a></li><li class="dropdown-item"><!----> <a href="/node/commonjs.html" class="nav-link">commonjs</a></li><li class="dropdown-item"><!----> <a href="/node/express.html" class="nav-link">express</a></li><li class="dropdown-item"><!----> <a href="/node/express静态资源处理.html" class="nav-link">express静态资源处理</a></li><li class="dropdown-item"><!----> <a href="/node/fs.html" class="nav-link router-link-exact-active router-link-active">fs</a></li><li class="dropdown-item"><!----> <a href="/node/http服务.html" class="nav-link">http服务</a></li><li class="dropdown-item"><!----> <a href="/node/koa.html" class="nav-link">koa</a></li><li class="dropdown-item"><!----> <a href="/node/nginx.html" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/node/node基本模块.html" class="nav-link">node基本模块</a></li><li class="dropdown-item"><!----> <a href="/node/node输入输出流.html" class="nav-link">node输入输出流</a></li><li class="dropdown-item"><!----> <a href="/node/npm.html" class="nav-link">npm</a></li><li class="dropdown-item"><!----> <a href="/node/process.html" class="nav-link">process</a></li><li class="dropdown-item"><!----> <a href="/node/shell.html" class="nav-link">shell</a></li><li class="dropdown-item"><!----> <a href="/node/stream.html" class="nav-link">stream</a></li></ul></div></div><div class="nav-item"><a href="/ES6/" class="nav-link">ES6</a></div><div class="nav-item"><a href="/commander/" class="nav-link">command</a></div><div class="nav-item"><a href="https://github.com/G-Tristin/vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/ts/" class="nav-link">TS</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">web</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/home/javascript.html" class="nav-link">js</a></li><li class="dropdown-item"><!----> <a href="/home/css.html" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/home/babel.html" class="nav-link">babel</a></li><li class="dropdown-item"><!----> <a href="/home/context.html" class="nav-link">context</a></li><li class="dropdown-item"><!----> <a href="/home/gulp.html" class="nav-link">gulp</a></li><li class="dropdown-item"><!----> <a href="/home/html5.html" class="nav-link">html5</a></li><li class="dropdown-item"><!----> <a href="/home/polyfill.html" class="nav-link">polyfill</a></li><li class="dropdown-item"><!----> <a href="/home/webpack.html" class="nav-link">webpack</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/base.html" class="nav-link">base</a></li><li class="dropdown-item"><!----> <a href="/vue/component.html" class="nav-link">component</a></li><li class="dropdown-item"><!----> <a href="/vue/lib-flexible.html" class="nav-link">lib-flexible</a></li><li class="dropdown-item"><!----> <a href="/vue/vueload.html" class="nav-link">vueload</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">React</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react/受控组件.html" class="nav-link">受控组件</a></li><li class="dropdown-item"><!----> <a href="/react/状态提升与slot.html" class="nav-link">状态提升与slot</a></li><li class="dropdown-item"><!----> <a href="/react/redux.html" class="nav-link">redux</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/buffer.html" class="nav-link">buffer</a></li><li class="dropdown-item"><!----> <a href="/node/childProcess.html" class="nav-link">childProcess</a></li><li class="dropdown-item"><!----> <a href="/node/cluster.html" class="nav-link">cluster</a></li><li class="dropdown-item"><!----> <a href="/node/commonjs.html" class="nav-link">commonjs</a></li><li class="dropdown-item"><!----> <a href="/node/express.html" class="nav-link">express</a></li><li class="dropdown-item"><!----> <a href="/node/express静态资源处理.html" class="nav-link">express静态资源处理</a></li><li class="dropdown-item"><!----> <a href="/node/fs.html" class="nav-link router-link-exact-active router-link-active">fs</a></li><li class="dropdown-item"><!----> <a href="/node/http服务.html" class="nav-link">http服务</a></li><li class="dropdown-item"><!----> <a href="/node/koa.html" class="nav-link">koa</a></li><li class="dropdown-item"><!----> <a href="/node/nginx.html" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/node/node基本模块.html" class="nav-link">node基本模块</a></li><li class="dropdown-item"><!----> <a href="/node/node输入输出流.html" class="nav-link">node输入输出流</a></li><li class="dropdown-item"><!----> <a href="/node/npm.html" class="nav-link">npm</a></li><li class="dropdown-item"><!----> <a href="/node/process.html" class="nav-link">process</a></li><li class="dropdown-item"><!----> <a href="/node/shell.html" class="nav-link">shell</a></li><li class="dropdown-item"><!----> <a href="/node/stream.html" class="nav-link">stream</a></li></ul></div></div><div class="nav-item"><a href="/ES6/" class="nav-link">ES6</a></div><div class="nav-item"><a href="/commander/" class="nav-link">command</a></div><div class="nav-item"><a href="https://github.com/G-Tristin/vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/ts/" class="nav-link">TS</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/node/" class="sidebar-link">node</a></li><li><a href="/node/buffer.html" class="sidebar-link">Buffer - 缓冲器</a></li><li><a href="/node/process.html" class="sidebar-link">process - 进程</a></li><li><a href="/node/childProcess.html" class="sidebar-link">child_process - 子进程</a></li><li><a href="/node/stream.html" class="sidebar-link">stream - 流</a></li><li><a href="/node/commonjs.html" class="sidebar-link">commonJs</a></li><li><a href="/node/node基本模块.html" class="sidebar-link">node 基本模块</a></li><li><a href="/node/http服务.html" class="sidebar-link">http服务</a></li><li><a href="/node/express.html" class="sidebar-link">express</a></li><li><a href="/node/express静态资源处理.html" class="sidebar-link">express静态资源处理</a></li><li><a href="/node/koa.html" class="sidebar-link">koa</a></li><li><a href="/node/npm.html" class="sidebar-link">npm的一些基本功能</a></li></ul> </div> <div class="page"> <div class="content"><p>#fs模块</p> <h2 id="基本概念"><a href="#基本概念" aria-hidden="true" class="header-anchor">#</a> 基本概念</h2> <h3 id="文件描述符"><a href="#文件描述符" aria-hidden="true" class="header-anchor">#</a> 文件描述符</h3> <p>1.任何指定的文件描述符都必须支持读取
2.如果将文件描述符指定为path，则不会自动关闭它</p> <p>fs模块的API有很多，如果想详细的了解则需要仔细的查看文档，但是在日常的开发中我们可能不会使用到那么多的API，以下介绍一些在
开发过程中将会常用到的Api,并且介绍的都是异步版本的API。</p> <h3 id="fs-open-path-flags-mode-callback-该方法用于打开文件-以便fs-read-读取"><a href="#fs-open-path-flags-mode-callback-该方法用于打开文件-以便fs-read-读取" aria-hidden="true" class="header-anchor">#</a> fs.open(path,flags,mode,callback) 该方法用于打开文件,以便fs.read()读取</h3> <ul><li>path 文件路径</li> <li>flags 打开文件的方式</li> <li>mode 文件的权限</li> <li>callback 回调函数
<ul><li>err 错误信息</li> <li>fd 文件描述符</li></ul></li></ul> <h3 id="fs-close-fd-callback-关闭当前文件-fd是被打开文件时创建的描述符"><a href="#fs-close-fd-callback-关闭当前文件-fd是被打开文件时创建的描述符" aria-hidden="true" class="header-anchor">#</a> fs.close(fd,callback) 关闭当前文件 fd是被打开文件时创建的描述符</h3> <h3 id="fs-read-fd-buffer-offset-length-position-calllback"><a href="#fs-read-fd-buffer-offset-length-position-calllback" aria-hidden="true" class="header-anchor">#</a> fs.read(fd,buffer,offset,length,position,calllback)</h3> <ul><li>fd 文件描述符 从被打开的文件中获取</li> <li>buffer 是存放读取到的数据的buffer对象</li> <li>offset 指定向buffer中存放数据的起始位置</li> <li>length 指定文件中数据的字节数</li> <li>position 指定文件中读取内容的起始位置</li> <li>callback 回调</li> <li>err 抛出错误</li> <li>bytesRead 从文件中读取内容的实际字节数</li> <li>buffer 被读取的缓存区对象
eg:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>var fs = require('fs'); // 引入fs模块
// 打开文件
fs.open('./text.txt', 'r', function(err, fd) {
    if (err) {
        throw err;
    }
    console.log('open file success.');
    var buffer = new Buffer(255); // 创建一个buffer对象，用于存储fs.read读取到的数据
    // 读取文件
    fs.read(fd, buffer, 0, 10, 0, function(err, bytesRead, buffer) {
        if (err) {
            throw err;
        }
        // 此时已经将数据存放到我们创建出来的buffer对象当中
        // 打印出buffer中存入的数据
        console.log(bytesRead, buffer.slice(0, bytesRead).toString());
 
        // 关闭文件
        fs.close(fd);
    });
});
</code></pre></div><h3 id="fs-readdir-path-options-callback"><a href="#fs-readdir-path-options-callback" aria-hidden="true" class="header-anchor">#</a> fs.readdir(path,options,callback)</h3> <ul><li>path</li> <li>options</li> <li>encoding  默认utf-8</li> <li>withFileTypes  默认值为false</li> <li>callback</li> <li>err</li> <li>files
异步读取目录的内容，回调中有2个参数,其中files是目录中文件名的数组
如果 options.withFileTypes 设置为 true，则 files 数组将包含 fs.Dirent 对象。</li></ul> <h3 id="fs-readfile-path-options-callback"><a href="#fs-readfile-path-options-callback" aria-hidden="true" class="header-anchor">#</a> fs.readFile(path,options,callback)</h3> <p>异步的读取文件的全部内容 --- 注意是全部</p> <ul><li>path:string|buffer|url|integer 文件名或者文件描述符</li> <li>option
<ul><li>enconding 编码方式 默认值是null 常用utf-8</li> <li>flag 默认值r 表示是读取文件</li></ul></li> <li>callback
<ul><li>err</li> <li>data - 读取的数据 如果没有指定编码方式则默认是二进制数据</li></ul></li></ul> <div class="language- extra-class"><pre class="language-text"><code>fs.readFile('./message',(err,data)=&gt;{
  console.log(data)
})
</code></pre></div><h3 id="fs-write-fd-buffer-offset-length-position-callback"><a href="#fs-write-fd-buffer-offset-length-position-callback" aria-hidden="true" class="header-anchor">#</a> fs.write(fd,buffer,offset,length,position,callback)</h3> <ul><li>fd 通过fs.open()获取到的文件描述符</li> <li>buffer 将要被写入文件当中的buffer对象</li> <li>offset 决定buffer中要被写入的部位，</li> <li>length 一个整数指定要写入的字节数</li> <li>position 指定文件开头的偏移量(数据应该被写入到的目标文件的偏移量)</li> <li>callback</li> <li>err 错误信息</li> <li>bytesWritten 被写入到文件当中的实际buffer字节数</li> <li>buffer 目前我认为是被写入的buffer</li></ul> <h3 id="fs-write-fd-string-position-enconding-callback"><a href="#fs-write-fd-string-position-enconding-callback" aria-hidden="true" class="header-anchor">#</a> fs.write(fd,string,position,enconding,callback)</h3> <p>大部分参数和上面的方法类似</p> <ul><li>string 将要被写入文件的字符串</li> <li>callback</li> <li>err 错误</li> <li>written 指定传入的字符串中被写入的字节数。被写入的字节数不一定与被写入的字符串字符数相同</li> <li>string 被写入额字符串</li></ul> <h3 id="fs-writefile-file-data-options-callback"><a href="#fs-writefile-file-data-options-callback" aria-hidden="true" class="header-anchor">#</a> fs.writeFile(file,data,options,callback)</h3> <ul><li>file 文件名或者文件描述符 当 file 是一个文件名时，异步地将数据写入到一个文件，如果文件已存在则覆盖该文件。</li> <li>data  可以是字符串或 buffer。将要被写入到特定文件的数据</li> <li>options</li> <li>encoding 字符编码方式</li> <li>mode 文件的权限 可读|可写|可执行</li> <li>flag 文件系统标志 r-打开文件用于读取 w-打开文件用于写入</li> <li>callback
<ul><li>err 错误信息</li></ul></li></ul> <h3 id="fs-rename-oldpath-newpath-callback-对文件重命名"><a href="#fs-rename-oldpath-newpath-callback-对文件重命名" aria-hidden="true" class="header-anchor">#</a> fs.rename(oldPath,newPath,callback) 对文件重命名</h3> <h3 id="fs-stat-path-options-callback-该方法一般用于查看被打开的是文件还是文件夹"><a href="#fs-stat-path-options-callback-该方法一般用于查看被打开的是文件还是文件夹" aria-hidden="true" class="header-anchor">#</a> fs.stat(path,options,callback) 该方法一般用于查看被打开的是文件还是文件夹</h3> <ul><li>callback</li> <li>err</li> <li>stats  ---是一个fs.Stats对象
不建议在调用 fs.open()、 fs.readFile() 或 fs.writeFile() 之前使用 fs.stat() 检查文件是否存在。 而是应该直接打开、读取或写入文件，如果文件不可用则处理引发的错误。
要检查文件是否存在但随后并不对其进行操作，则建议使用 fs.access()。</li></ul> <h3 id="fs-watch-filename-options-listener"><a href="#fs-watch-filename-options-listener" aria-hidden="true" class="header-anchor">#</a> fs.watch(fileName,options,listener)</h3> <ul><li>options</li> <li>persistent 如果文件已经被监视,进程是否应继续进行 默认值true</li> <li>recursive 指示应监视所有子目录 默认值false</li> <li>enconding 指定用于传给监听器的文件名的字符编码 默认utf-8</li> <li>listener function|undefined 默认值undefined</li> <li>evenType string</li> <li>filename string
返回值是fs.FSWatcher</li></ul> <p>监听fileName的更改，fileName是文件或者目录</p> <p>第二个参数是可选的。如果传入字符串，则它指定encoding。否则需要传入对象。</p> <p>监听器回调有2个参数(eventType,filename)。eventType是'rename'或者'change',filename是触发事件的文件名称</p> <p>在大多数平台上，每当文件名在目录当中消失或者出现，就会触发'rename'事件</p> <p>监听器回调绑定在由 fs.FSWatcher触发的change事件上，但它与eventType的'change'值不是一回事</p> <h3 id="fs-watchfile-filename-options-listener"><a href="#fs-watchfile-filename-options-listener" aria-hidden="true" class="header-anchor">#</a> fs.watchFile(filename,options,listener)</h3> <ul><li>options</li> <li>presistent 如果文件已经被监视,进程是否应继续进行 默认值true</li> <li>interval 指示轮询目标的频率</li> <li>listener</li> <li>current 当前的stat对象</li> <li>previous 之前的stat对象
监视filename的更改。每当访问文件时都会调用listener回调</li></ul> <div class="language- extra-class"><pre class="language-text"><code>fs.watchFile('message.text', (curr, prev) =&gt; {
  console.log(`当前的最近修改时间是: ${curr.mtime}`);
  console.log(`之前的最近修改时间是: ${prev.mtime}`);
});
</code></pre></div><p>这些 stat 对象是 fs.Stat 的实例。</p> <h3 id="fs-appendfile-path-data-optiions-callback"><a href="#fs-appendfile-path-data-optiions-callback" aria-hidden="true" class="header-anchor">#</a> fs.appendFile(path,data,optiions,callback)</h3> <ul><li>path 文件名或者文件描述符</li> <li>data 将要被追加到目标文件的数据资源 string|buffer</li> <li>options
<ul><li>enconding 编码方式 默认utf-8</li> <li>mode 权限值 默认O066</li> <li>flag 文件系统标志 默认'a'</li></ul></li> <li>callback
<ul><li>err 错误
异步的将数据追加到目标文件当中,如果文件尚不存在则创建文件。data可以是字符串或者buffer。</li></ul></li></ul> <h2 id="读写文件当中的流"><a href="#读写文件当中的流" aria-hidden="true" class="header-anchor">#</a> 读写文件当中的流</h2> <h3 id="fs-createreadstream-path-options"><a href="#fs-createreadstream-path-options" aria-hidden="true" class="header-anchor">#</a> fs.createReadstream(path,options)</h3> <ul><li>path string|buffer|url</li> <li>options string | object</li> <li>flag 文件系统标识符 默认'r'</li> <li>encoding 默认为null</li> <li>fd 默认为null</li> <li>mode 默认为O066 文件的权限值</li> <li>autoClose 默认值为true 出现错误或者读取结束会自动关闭流</li> <li>start</li> <li>end 默认值 infinity</li> <li>highWaterMark 默认值是64*1024</li></ul> <p>返回值为 fs.ReadStream</p> <p>该方法只是创建了一个可读流，但是监听的事件在readStream实例上</p> <p>与可读流的16KB的默认highWaterMark不同，此方法返回的流具有64kb的默认值</p> <p>options可以包括start和end值,以从当前文件中读取一定范围的字节而不是读取整个文件。start和end都包含在内
并且statr的默认值为0。如果指定了fd并且start被省略或是undefined,则fs.createReadStream()从当前文件位置开始顺序读取。enconding可以是buffer接收的任何一种字符编码。</p> <p>如果指定了fd,则ReadStream将忽略path参数并使用指定的文件描述符。</p> <h3 id="fs-readstream类"><a href="#fs-readstream类" aria-hidden="true" class="header-anchor">#</a> fs.ReadStream类</h3> <p>通过fs.createReadStream创建的可读流的返回值都是fs.ReadStream类的实例。所以都可以调用到该类底下的方法。</p> <p>并且可以使用到可读流下面的所有方法具体可在stream那一章观看</p> <p>close事件 fs.ReadStream的底层描述符关闭时触发</p> <p>open事件 fs.ReadStream的文件描述符打开时触发</p> <p>ready事件 fs.ReadStream准备好使用时触发</p> <p>data事件 fs.ReadStream读取完文件时触发</p> <div class="language- extra-class"><pre class="language-text"><code>const fs = require('fs')
const readStream =  fs.createReadStream('./message1','utf-8')
readStream.on('open',(fd)=&gt;{
  console.log('文件被打开了' + fd)
})
readStream.on('data',(chunk)=&gt;{
  console.log(chunk)
})
readStream.on('err',(err)=&gt;{
  console.log('文件读取失败' + err)
})
readStream.on('colse',()=&gt;{
  console.log('文件被关闭')
})
readStream.on('end',()=&gt;{
  console.log('文件读取结束')
})
</code></pre></div><h3 id="fs-createwritestream"><a href="#fs-createwritestream" aria-hidden="true" class="header-anchor">#</a> fs.createWriteStream</h3> <ul><li>path string|buffer|url</li> <li>options string|object</li> <li>flags 文件系统标识 默认值为'w'</li> <li>encoding 字符集 utf-8</li> <li>mode 文件的权限 默认值O066</li> <li>autoClose 是否自动关闭 true</li> <li>start</li></ul> <p>该方法只是创建了一个可写流，但是监听的事件在writeStream实例上</p> <p>options可以包括一个start选项，允许在文件开头之后的某个位置写入文件，允许的值范围在[0,Number.MAX_SAFE_INTEGER]范围内。如果要修改文件而不是覆盖它，则flags需要为r+而不是默认的w默认。
encoding可以是buffer接受的任何一种字符编码。</p> <p>与 ReadStream 类似，如果指定了 fd，则 WriteStream 将忽略 path 参数并使用指定的文件描述符。</p> <h3 id="fs-writestream类"><a href="#fs-writestream类" aria-hidden="true" class="header-anchor">#</a> fs.WriteStream类</h3> <p>通过fs.createWriteStream创建的可写流的返回值都是fs.WriteStream类的实例。所以都可以调用到该类底下的方法。</p> <p>并且可以使用到可写流下面的所有方法具体可在stream那一章观看</p> <h4 id="事件"><a href="#事件" aria-hidden="true" class="header-anchor">#</a> 事件</h4> <p>err事件 读取文件错误时触发的事件</p> <p>open 被读取文件被打开时触发的事件</p> <p>finish 文件写入完成时触发的事件</p> <p>close 被写入的文件已经关闭</p> <h4 id="方法"><a href="#方法" aria-hidden="true" class="header-anchor">#</a> 方法</h4> <p>writeStream.write('这是我要做的测试内容') 写入数据到文件，参数代表写入的数据</p> <p>writeStream.end() 停止写入数据到文件</p> <div class="language- extra-class"><pre class="language-text"><code>const fs=require('fs');
const path=require('path');
let writeStream=fs.createWriteStream('./test/b.js',{encoding:'utf8'});
 
//写入文件发生错误事件
writeStream.on('error', (err) =&gt; {
    console.log('发生异常:', err);
});
//已打开要写入的文件事件
writeStream.on('open', (fd) =&gt; {
    console.log('文件已打开:', fd);
});
//文件已经就写入完成事件
writeStream.on('finish', () =&gt; {
    console.log('写入已完成..');
    console.log('读取文件内容:', fs.readFileSync('./test/b.js', 'utf8')); //打印写入的内容
    console.log(writeStream);
});
 
//文件关闭事件
writeStream.on('close', () =&gt; {
    console.log('文件已关闭！');
});
 
writeStream.write('这是我要做的测试内容');
writeStream.end() 结束写入数据到文件
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.81bc3037.js" defer></script><script src="/assets/js/32.cc80342c.js" defer></script>
  </body>
</html>
